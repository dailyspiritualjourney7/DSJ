<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Spiritual Journey</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #166088;
            --accent-color: #4cb5ae;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --text-color: #333;
            --text-light: #6c757d;
            --bg-light: #ffffff;
            --bg-dark: #1a1a1a;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --primary-color: #5c7eb1;
            --secondary-color: #2a74a3;
            --accent-color: #5ec5bf;
            --light-color: #2d3748;
            --dark-color: #e2e8f0;
            --text-color: #e2e8f0;
            --text-light: #a0aec0;
            --bg-light: #1a202c;
            --bg-dark: #121212;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-light);
            transition: var(--transition);
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .logo span {
            color: var(--accent-color);
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 1.5rem;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
        }

        nav ul li a:hover {
            color: var(--accent-color);
        }

        .nav-buttons {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .search-toggle {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .hamburger {
            display: none;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.5rem;
        }

        .search-bar {
            display: none;
            margin-top: 1rem;
            width: 100%;
        }

        .search-bar.active {
            display: block;
        }

        .search-bar input {
            width: 100%;
            padding: 0.5rem;
            border-radius: 4px;
            border: none;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%234a6fa5"/><text x="50%" y="50%" font-size="20" text-anchor="middle" fill="%23ffffff" font-family="Arial">Daily Spiritual Journey</text></svg>');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 4rem 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
        }

        .btn {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background-color: var(--accent-color);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: 500;
            transition: var(--transition);
            border: none;
            cursor: pointer;
        }

        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: var(--secondary-color);
        }

        .btn-secondary:hover {
            background-color: var(--primary-color);
        }

        /* Featured Section */
        .featured {
            padding: 3rem 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--primary-color);
        }

        .featured-card {
            background-color: var(--light-color);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
        }

        .featured-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .card-img {
            height: 200px;
            background-color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            overflow: hidden;
        }

        .card-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .card-content {
            padding: 1.5rem;
        }

        .card-content h3 {
            margin-bottom: 0.5rem;
            color: var(--secondary-color);
        }

        .card-meta {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        /* Latest Posts */
        .latest {
            padding: 3rem 0;
            background-color: var(--light-color);
        }

        .posts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .post-card {
            background-color: var(--bg-light);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            cursor: pointer;
        }

        .post-card:hover {
            transform: translateY(-3px);
        }

        .post-img {
            height: 160px;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            overflow: hidden;
        }

        .post-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .post-content {
            padding: 1.2rem;
        }

        /* Categories */
        .categories {
            padding: 3rem 0;
        }

        .categories-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
        }

        .category-btn {
            padding: 0.6rem 1.2rem;
            background-color: var(--light-color);
            border: 1px solid var(--primary-color);
            border-radius: 30px;
            color: var(--primary-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .category-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        /* Footer */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 3rem 0 1.5rem;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .footer-section h3 {
            margin-bottom: 1.2rem;
            color: var(--accent-color);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.8rem;
        }

        .footer-section ul li a {
            color: #ddd;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-section ul li a:hover {
            color: var(--accent-color);
        }

        .subscribe-form input {
            width: 100%;
            padding: 0.8rem;
            margin-bottom: 1rem;
            border: none;
            border-radius: 4px;
        }

        .social-icons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-icons a {
            color: white;
            font-size: 1.2rem;
            transition: var(--transition);
        }

        .social-icons a:hover {
            color: var(--accent-color);
        }

        .copyright {
            text-align: center;
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Page Styles */
        .page {
            display: none;
            padding: 2rem 0;
        }

        .page.active {
            display: block;
        }

        /* Admin Login */
        .admin-login {
            max-width: 500px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: var(--light-color);
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        /* Admin Dashboard */
        .admin-dashboard {
            padding: 2rem;
            background-color: var(--light-color);
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }

        .admin-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 1.5rem;
        }

        .admin-tab {
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }

        .admin-tab.active {
            border-bottom: 3px solid var(--accent-color);
            font-weight: 600;
        }

        .admin-tab-content {
            display: none;
        }

        .admin-tab-content.active {
            display: block;
        }

        /* Quill Editor */
        .editor-container {
            margin-bottom: 1.5rem;
            background: white;
            border-radius: 4px;
        }

        /* Data Management */
        .data-management {
            margin-top: 2rem;
            padding: 1.5rem;
            background-color: var(--light-color);
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }

        .data-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        /* Post Detail View */
        .post-detail {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background-color: var(--light-color);
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }

        .post-detail-header {
            margin-bottom: 2rem;
            border-bottom: 1px solid #ddd;
            padding-bottom: 1rem;
        }

        .post-detail-title {
            font-size: 2rem;
            color: var(--secondary-color);
            margin-bottom: 0.5rem;
        }

        .post-detail-meta {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .post-detail-content {
            line-height: 1.8;
            font-size: 1.1rem;
        }

        .post-detail-content p {
            margin-bottom: 1.5rem;
        }

        .back-button {
            margin-bottom: 2rem;
        }

        /* Modal for Post Detail */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal-content {
            background-color: var(--bg-light);
            margin: 2% auto;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 800px;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        /* Comment Section Styles */
        .comments-section {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid #ddd;
        }

        .comments-section h3 {
            color: var(--secondary-color);
            margin-bottom: 1.5rem;
        }

        .comment-form {
            background-color: var(--light-color);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        }

        .comment {
            background-color: var(--light-color);
            padding: 1.2rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: var(--card-shadow);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.8rem;
        }

        .comment-author {
            font-weight: 600;
            color: var(--secondary-color);
        }

        .comment-date {
            color: var(--text-light);
            font-size: 0.85rem;
        }

        .comment-content {
            margin-bottom: 0.8rem;
            line-height: 1.6;
        }

        .comment-actions {
            display: flex;
            justify-content: flex-end;
        }

        .no-comments {
            text-align: center;
            color: var(--text-light);
            padding: 2rem;
        }

        /* Thumbnail Preview */
        .thumbnail-preview {
            margin-top: 1rem;
            max-width: 200px;
            display: none;
        }

        .thumbnail-preview img {
            width: 100%;
            border-radius: 4px;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                align-items: flex-start;
            }

            nav ul {
                flex-direction: column;
                width: 100%;
                display: none;
                margin-top: 1rem;
            }

            nav ul.show {
                display: flex;
            }

            nav ul li {
                margin: 0.5rem 0;
            }

            .hamburger {
                display: block;
                position: absolute;
                right: 20px;
                top: 20px;
            }

            .nav-buttons {
                margin-top: 1rem;
                width: 100%;
                justify-content: space-between;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .data-buttons {
                flex-direction: column;
            }

            .modal-content {
                width: 95%;
                padding: 15px;
            }
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            background-color: var(--accent-color);
            color: white;
            border-radius: 4px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            opacity: 0;
            transform: translateY(100px);
            transition: all 0.3s ease;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Edit Post Form Fixes */
        .post-item {
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 1rem;
            background-color: white;
        }

        .post-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        /* Category Management Styles */
        .category-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem;
            border-bottom: 1px solid #ddd;
        }

        .category-actions {
            display: flex;
            gap: 0.5rem;
        }

        .visibility-toggle {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .visible-icon {
            color: green;
        }

        .hidden-icon {
            color: #ccc;
        }

        .category-badge {
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }

        .visible-badge {
            background-color: #e6f7ee;
            color: #0c9960;
        }

        .hidden-badge {
            background-color: #f8f8f8;
            color: #999;
        }
    </style>
</head>
<body>
    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Post Detail Modal -->
    <div id="post-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="close-modal">&times;</span>
            <div id="post-detail-content"></div>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">Daily <span>Spiritual</span> Journey</div>
            <button class="hamburger" id="hamburger-menu">
                <i class="fas fa-bars"></i>
            </button>
            <nav>
                <ul id="nav-menu">
                    <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                    <li><a href="#" class="nav-link" data-page="homilies">Homilies</a></li>
                    <li><a href="#" class="nav-link" data-page="latest">Latest</a></li>
                    <li><a href="#" class="nav-link" data-page="about">About</a></li>
                    <li><a href="#" class="nav-link" data-page="contact">Contact</a></li>
                    <li><a href="#" class="nav-link" data-page="resources">Resources</a></li>
                    <li><a href="#" class="nav-link" data-page="admin-login">Admin</a></li>
                </ul>
            </nav>
            <div class="nav-buttons">
                <button class="search-toggle" id="search-toggle">
                    <i class="fas fa-search"></i>
                </button>
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
            <div class="search-bar" id="search-bar">
                <input type="text" placeholder="Search for homilies, scriptures, or themes..." id="search-input">
            </div>
        </div>
    </header>

    <!-- Home Page -->
    <div id="home" class="page active">
        <section class="hero">
            <div class="container">
                <h1>Daily Inspiration for Your Spiritual Journey</h1>
                <p>Reflect on daily homilies and deepen your faith with our collection of spiritual resources</p>
                <a href="#" class="btn nav-link" data-page="homilies">Explore Homilies</a>
            </div>
        </section>

        <section class="featured">
            <div class="container">
                <h2 class="section-title">Today's Featured Homily</h2>
                <div class="featured-card">
                    <div class="card-img">Featured Homily Image</div>
                    <div class="card-content">
                        <h3>The Power of Faith in Difficult Times</h3>
                        <div class="card-meta">Posted on: <span>June 15, 2023</span> | Scripture: <span>John 3:16</span></div>
                        <p>In today's reflection, we explore how faith can be our guiding light during challenging moments, providing strength and perspective when we need it most...</p>
                        <a href="#" class="btn">Read More</a>
                    </div>
                </div>
            </div>
        </section>

        <section class="latest">
            <div class="container">
                <h2 class="section-title">Recent Homilies</h2>
                <div class="posts-grid" id="home-latest-container">
                    <!-- Latest posts will be loaded here -->
                </div>
            </div>
        </section>

        <section class="categories">
            <div class="container">
                <h2 class="section-title">Browse by Category</h2>
                <div class="categories-container" id="home-categories">
                    <!-- Category buttons will be loaded here -->
                </div>
            </div>
        </section>
    </div>

    <!-- Other Pages (initially hidden) -->
    <div id="homilies" class="page">
        <div class="container">
            <h2 class="section-title">All Homilies</h2>
            <div class="categories-container" id="homilies-categories">
                <!-- Category filter buttons will be loaded here -->
            </div>
            <div class="posts-grid" id="homilies-container">
                <!-- Homilies content will be loaded here -->
            </div>
        </div>
    </div>

    <div id="latest" class="page">
        <div class="container">
            <h2 class="section-title">Latest Posts</h2>
            <div class="posts-grid" id="latest-container">
                <!-- Latest posts content will be loaded here -->
            </div>
        </div>
    </div>

    <div id="about" class="page">
        <div class="container">
            <h2 class="section-title">About Daily Spiritual Journey</h2>
            <div class="about-content">
                <p>Daily Spiritual Journey is a platform dedicated to providing daily homilies and spiritual resources to help you on your faith journey. Our mission is to make spiritual wisdom accessible to everyone, everywhere.</p>
                <p>Founded in 2023, we strive to create a community of believers who support each other through shared reflections and prayers.</p>
            </div>
        </div>
    </div>

    <div id="contact" class="page">
        <div class="container">
            <h2 class="section-title">Contact Us</h2>
            <div class="contact-form">
                <form id="contact-form">
                    <div class="form-group">
                        <label for="name">Your Name</label>
                        <input type="text" id="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Your Email</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="message">Your Message</label>
                        <textarea id="message" rows="5" required></textarea>
                    </div>
                    <button type="submit" class="btn">Send Message</button>
                </form>
            </div>
        </div>
    </div>

    <div id="resources" class="page">
        <div class="container">
            <h2 class="section-title">Spiritual Resources</h2>
            <div class="resources-container">
                <div class="resource-categories">
                    <h3>Categories</h3>
                    <ul>
                        <li><a href="#">Prayer Guides</a></li>
                        <li><a href="#">Scripture Studies</a></li>
                        <li><a href="#">Devotionals</a></li>
                        <li><a href="#">Liturgical Resources</a></li>
                    </ul>
                </div>
                <div class="resources-list">
                    <div class="resource-item">
                        <h4>Daily Prayer Guide</h4>
                        <p>A comprehensive guide to developing a daily prayer habit.</p>
                        <a href="#" class="btn">Download PDF</a>
                    </div>
                    <div class="resource-item">
                        <h4>Understanding the Gospels</h4>
                        <p>An in-depth study of the four Gospels and their messages.</p>
                        <a href="#" class="btn">Download PDF</a>
                    </div>
                </div>
                <div class="resources-list" id="resources-container">
                    <!-- Resources will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Login Page -->
    <div id="admin-login" class="page">
        <div class="container">
            <h2 class="section-title">Admin Login</h2>
            <div class="admin-login">
                <form id="login-form">
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" required>
                    </div>
                    <button type="submit" class="btn">Login</button>
                </form>
                <p style="margin-top: 1rem; text-align: center;">
                    <a href="#" id="forgot-password">Forgot Password?</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard (initially hidden) -->
    <div id="admin-dashboard" class="page">
        <div class="container">
            <h2 class="section-title">Admin Dashboard</h2>
            <div class="admin-dashboard">
                <div class="admin-tabs">
                    <div class="admin-tab active" data-tab="posts">Manage Posts</div>
                    <div class="admin-tab" data-tab="categories">Manage Categories</div>
                    <div class="admin-tab" data-tab="resources">Manage Resources</div>
                    <div class="admin-tab" data-tab="data">Data Management</div>
                    <div class="admin-tab" data-tab="settings">Settings</div>
                </div>
                
                <div class="admin-tab-content active" id="posts-tab">
                    <h3>Create New Post</h3>
                    <form id="post-form">
                        <div class="form-group">
                            <label for="post-title">Title</label>
                            <input type="text" id="post-title" required>
                        </div>
                        <div class="form-group">
                            <label for="post-category">Category</label>
                            <select id="post-category" required>
                                <option value="">Select a category</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="post-scripture">Scripture Reference</label>
                            <input type="text" id="post-scripture" placeholder="e.g., John 3:16">
                        </div>
                        <div class="form-group">
                            <label for="post-thumbnail">Thumbnail Image</label>
                            <input type="file" id="post-thumbnail" accept="image/*">
                            <div class="thumbnail-preview" id="thumbnail-preview">
                                <img id="thumbnail-preview-img" src="" alt="Thumbnail preview">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="post-content">Content</label>
                            <div id="editor"></div>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="post-featured"> Feature this post
                            </label>
                        </div>
                        <button type="submit" class="btn">Save Post</button>
                    </form>

                    <div class="data-management">
                        <h3>Existing Posts</h3>
                        <div id="posts-list">
                            <!-- Posts will be listed here -->
                        </div>
                    </div>
                </div>
                
                <div class="admin-tab-content" id="categories-tab">
                    <h3>Manage Categories</h3>
                    <form id="category-form">
                        <div class="form-group">
                            <label for="category-name">Category Name</label>
                            <input type="text" id="category-name" required>
                        </div>
                        <div class="form-group">
                            <label for="parent-category">Parent Category (optional)</label>
                            <select id="parent-category">
                                <option value="">None</option>
                            </select>
                        </div>
                        <button type="submit" class="btn">Add Category</button>
                    </form>
                    <div id="categories-list">
                        <h4>Existing Categories</h4>
                        <div id="categories-container">
                            <!-- Categories will be listed here with visibility controls -->
                        </div>
                    </div>
                </div>
                
                <div class="admin-tab-content" id="resources-tab">
                    <h3>Manage Resources</h3>
                    <form id="resource-form">
                        <div class="form-group">
                            <label for="resource-title">Resource Title</label>
                            <input type="text" id="resource-title" required>
                        </div>
                        <div class="form-group">
                            <label for="resource-category">Resource Category</label>
                            <input type="text" id="resource-category" required>
                        </div>
                        <div class="form-group">
                            <label for="resource-description">Description</label>
                            <textarea id="resource-description" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="resource-file">Upload PDF</label>
                            <input type="file" id="resource-file" accept=".pdf" required>
                        </div>
                        <button type="submit" class="btn">Upload Resource</button>
                    </form>

                    <div class="data-management">
                        <h3>Existing Resources</h3>
                        <div id="resources-list-admin">
                            <!-- Resources will be listed here -->
                        </div>
                    </div>
                </div>
                
                <div class="admin-tab-content" id="data-tab">
                    <h3>Data Management</h3>
                    <div class="data-management">
                        <p>Export your data to backup or transfer to another device. You can save these files to your D drive or any other location.</p>
                        <div class="data-buttons">
                            <button id="export-homilies" class="btn">Export Homilies</button>
                            <button id="export-categories" class="btn">Export Categories</button>
                            <button id="export-resources" class="btn">Export Resources</button>
                            <button id="export-all" class="btn btn-secondary">Export All Data</button>
                        </div>
                    </div>
                    
                    <div class="data-management">
                        <p>Import previously exported data from JSON files.</p>
                        <div class="form-group">
                            <label for="import-file">Select JSON file to import</label>
                            <input type="file" id="import-file" accept=".json">
                        </div>
                        <div class="data-buttons">
                            <button id="import-data" class="btn">Import Data</button>
                        </div>
                    </div>
                </div>
                
                <div class="admin-tab-content" id="settings-tab">
                    <h3>Admin Settings</h3>
                    <form id="settings-form">
                        <div class="form-group">
                            <label for="admin-email">Admin Email</label>
                            <input type="email" id="admin-email" value="rohittekka@gmail.com" readonly>
                        </div>
                        <div class="form-group">
                            <label for="new-password">New Password</label>
                            <input type="password" id="new-password">
                        </div>
                        <div class="form-group">
                            <label for="confirm-password">Confirm Password</label>
                            <input type="password" id="confirm-password">
                        </div>
                        <button type="submit" class="btn">Save Settings</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container footer-container">
            <div class="footer-section">
                <h3>Daily Spiritual Journey</h3>
                <p>Providing daily inspiration and guidance for your spiritual growth and development.</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                    <li><a href="#" class="nav-link" data-page="homilies">Homilies</a></li>
                    <li><a href="#" class="nav-link" data-page="latest">Latest Posts</a></li>
                    <li><a href="#" class="nav-link" data-page="resources">Resources</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Subscribe</h3>
                <p>Stay updated with our latest homilies and spiritual resources.</p>
                <form class="subscribe-form" id="subscribe-form">
                    <input type="email" placeholder="Your Email Address" required>
                    <button type="submit" class="btn">Subscribe</button>
                </form>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2023 Daily Spiritual Journey. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Global variables
        let quill;
        let currentHomilyId = null;

        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the application
            initApp();
            
            // Navigation functionality
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page');
                    showPage(pageId);
                });
            });
            
            // Theme toggle functionality
            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.addEventListener('click', toggleTheme);
            
            // Search toggle functionality
            const searchToggle = document.getElementById('search-toggle');
            const searchBar = document.getElementById('search-bar');
            searchToggle.addEventListener('click', function() {
                searchBar.classList.toggle('active');
            });
            
            // Hamburger menu functionality
            const hamburgerMenu = document.getElementById('hamburger-menu');
            const navMenu = document.getElementById('nav-menu');
            hamburgerMenu.addEventListener('click', function() {
                navMenu.classList.toggle('show');
            });
            
            // Admin login functionality
            const loginForm = document.getElementById('login-form');
            if (loginForm) {
                loginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const password = document.getElementById('password').value;
                    if (password === 'rohitekka7') {
                        localStorage.setItem('authenticated', 'true');
                        showPage('admin-dashboard');
                        showToast('Login successful!', 'success');
                    } else {
                        showToast('Incorrect password. Please try again.', 'error');
                    }
                });
            }
            
            // Forgot password functionality
            const forgotPassword = document.getElementById('forgot-password');
            if (forgotPassword) {
                forgotPassword.addEventListener('click', function(e) {
                    e.preventDefault();
                    alert('Password reset link has been sent to rohittekka@gmail.com');
                });
            }
            
            // Admin tabs functionality
            const adminTabs = document.querySelectorAll('.admin-tab');
            adminTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchAdminTab(tabId);
                });
            });
            
            // Initialize Quill editor
            if (document.getElementById('editor')) {
                quill = initEditor();
            }
            
            // Thumbnail preview functionality
            const thumbnailInput = document.getElementById('post-thumbnail');
            if (thumbnailInput) {
                thumbnailInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(event) {
                            const preview = document.getElementById('thumbnail-preview');
                            const previewImg = document.getElementById('thumbnail-preview-img');
                            previewImg.src = event.target.result;
                            preview.style.display = 'block';
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
            
            // Form submissions
            const postForm = document.getElementById('post-form');
            if (postForm) {
                postForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    savePost();
                });
            }
            
            const categoryForm = document.getElementById('category-form');
            if (categoryForm) {
                categoryForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    addCategory();
                });
            }
            
            const resourceForm = document.getElementById('resource-form');
            if (resourceForm) {
                resourceForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    addResource();
                });
            }
            
            const subscribeForm = document.getElementById('subscribe-form');
            if (subscribeForm) {
                subscribeForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const email = subscribeForm.querySelector('input[type="email"]').value;
                    showToast(`Thank you for subscribing with ${email}!`);
                    subscribeForm.reset();
                });
            }
            
            const contactForm = document.getElementById('contact-form');
            if (contactForm) {
                contactForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    showToast('Thank you for your message. We will get back to you soon.');
                    contactForm.reset();
                });
            }
            
            const settingsForm = document.getElementById('settings-form');
            if (settingsForm) {
                settingsForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const newPassword = document.getElementById('new-password').value;
                    const confirmPassword = document.getElementById('confirm-password').value;
                    
                    if (newPassword && newPassword !== confirmPassword) {
                        showToast('Passwords do not match.', 'error');
                        return;
                    }
                    
                    if (newPassword) {
                        showToast('Password updated successfully.');
                    } else {
                        showToast('Settings saved.');
                    }
                    
                    settingsForm.reset();
                });
            }
            
            // Data export functionality
            const exportHomiliesBtn = document.getElementById('export-homilies');
            if (exportHomiliesBtn) {
                exportHomiliesBtn.addEventListener('click', exportHomilies);
            }
            
            const exportCategoriesBtn = document.getElementById('export-categories');
            if (exportCategoriesBtn) {
                exportCategoriesBtn.addEventListener('click', exportCategories);
            }
            
            const exportResourcesBtn = document.getElementById('export-resources');
            if (exportResourcesBtn) {
                exportResourcesBtn.addEventListener('click', exportResources);
            }
            
            const exportAllBtn = document.getElementById('export-all');
            if (exportAllBtn) {
                exportAllBtn.addEventListener('click', exportAllData);
            }
            
            // Data import functionality
            const importDataBtn = document.getElementById('import-data');
            if (importDataBtn) {
                importDataBtn.addEventListener('click', importData);
            }
            
            // Modal functionality
            const closeModalBtn = document.getElementById('close-modal');
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', function() {
                    document.getElementById('post-modal').style.display = 'none';
                });
            }
            
            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                const modal = document.getElementById('post-modal');
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Event delegation for comment deletion
            document.addEventListener('click', function(e) {
                if (e.target && e.target.classList.contains('delete-comment')) {
                    const commentId = e.target.getAttribute('data-comment-id');
                    deleteComment(commentId);
                }
            });
        });
        
        function initApp() {
            // Check for saved theme preference
            if (localStorage.getItem('theme') === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.getElementById('theme-toggle').innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            // Initialize data if not exists
            if (!localStorage.getItem('homilies')) {
                const sampleHomilies = [
                    {
                        id: 1,
                        title: 'The Power of Faith in Difficult Times',
                        content: 'In today\'s reflection, we explore how faith can be our guiding light during challenging moments, providing strength and perspective when we need it most. Faith is not the absence of difficulties but the presence of certainty in the midst of them.',
                        date: '2023-06-15',
                        scripture: 'John 3:16',
                        category: 'Faith',
                        featured: true,
                        thumbnail: null
                    },
                    {
                        id: 2,
                        title: 'Finding Peace Within',
                        content: 'Exploring inner peace through prayer and meditation in our daily lives. True peace comes not from the absence of conflict but from the presence of God in our hearts.',
                        date: '2023-06-14',
                        scripture: 'Philippians 4:7',
                        category: 'Peace',
                        featured: false,
                        thumbnail: null
                    }
                ];
                localStorage.setItem('homilies', JSON.stringify(sampleHomilies));
            }
            
            if (!localStorage.getItem('categories')) {
                const categories = [
                    { 
                        id: 1, 
                        name: 'Liturgical Season', 
                        subcategories: ['Advent', 'Christmas', 'Lent', 'Easter', 'Ordinary Time'],
                        visible: true 
                    },
                    { 
                        id: 2, 
                        name: 'Feast Days', 
                        subcategories: ['Christmas', 'Easter', 'Pentecost', 'All Saints'],
                        visible: true 
                    },
                    { 
                        id: 3, 
                        name: 'Scripture Themes', 
                        subcategories: ['Gospels', 'Pauline Letters', 'Old Testament', 'Psalms'],
                        visible: true 
                    },
                    { 
                        id: 4, 
                        name: 'Spiritual Growth', 
                        subcategories: [],
                        visible: true 
                    },
                    { 
                        id: 5, 
                        name: 'Prayer', 
                        subcategories: [],
                        visible: true 
                    },
                    { 
                        id: 6, 
                        name: 'Sacraments', 
                        subcategories: [],
                        visible: true 
                    }
                ];
                localStorage.setItem('categories', JSON.stringify(categories));
            }

            if (!localStorage.getItem('resources')) {
                const resources = [
                    {
                        id: 1,
                        title: 'Daily Prayer Guide',
                        category: 'Prayer Guides',
                        description: 'A comprehensive guide to developing a daily prayer habit.',
                        filename: 'prayer_guide.pdf'
                    },
                    {
                        id: 2,
                        title: 'Understanding the Gospels',
                        category: 'Scripture Studies',
                        description: 'An in-depth study of the four Gospels and their messages.',
                        filename: 'gospels_study.pdf'
                    }
                ];
                localStorage.setItem('resources', JSON.stringify(resources));
            }
            
            // Initialize comments if not exists
            if (!localStorage.getItem('comments')) {
                localStorage.setItem('comments', JSON.stringify([]));
            }
            
            // Load initial data
            loadHomilies();
            loadCategories();
            loadResources();
            loadPostsList();
            loadCategoryButtons();
        }
        
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            
            // Show the requested page
            const pageElement = document.getElementById(pageId);
            if (pageElement) {
                pageElement.classList.add('active');
            }
            
            // If the page is admin-dashboard, make sure user is logged in
            if (pageId === 'admin-dashboard') {
                // Check if user is authenticated
                if (!localStorage.getItem('authenticated')) {
                    showPage('admin-login');
                    showToast('Please login to access the admin dashboard', 'error');
                    return;
                }
            }
            
            // Load appropriate content based on page
            if (pageId === 'homilies' || pageId === 'latest' || pageId === 'home') {
                loadHomilies();
            }
            
            if (pageId === 'resources') {
                loadResources();
            }
            
            if (pageId === 'admin-dashboard') {
                loadCategories();
                loadPostsList();
                loadResourcesList();
            }
            
            // Load category buttons when showing home page or homilies page
            if (pageId === 'home' || pageId === 'homilies') {
                loadCategoryButtons();
            }
            
            // Close mobile menu if open
            document.getElementById('nav-menu').classList.remove('show');
        }
        
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const themeIcon = document.getElementById('theme-toggle');
            
            if (currentTheme === 'dark') {
                document.documentElement.removeAttribute('data-theme');
                themeIcon.innerHTML = '<i class="fas fa-moon"></i>';
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeIcon.innerHTML = '<i class="fas fa-sun"></i>';
                localStorage.setItem('theme', 'dark');
            }
        }
        
        function switchAdminTab(tabId) {
            // Deactivate all tabs
            const tabs = document.querySelectorAll('.admin-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Activate the clicked tab
            document.querySelector(`.admin-tab[data-tab="${tabId}"]`).classList.add('active');
            
            // Hide all tab content
            const tabContents = document.querySelectorAll('.admin-tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            // Show the selected tab content
            document.getElementById(`${tabId}-tab`).classList.add('active');
        }
        
        function initEditor() {
            return new Quill('#editor', {
                modules: {
                    toolbar: [
                        [{ 'header': [1, 2, 3, false] }],
                        ['bold', 'italic', 'underline'],
                        [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                        ['link', 'image'],
                        ['clean']
                    ]
                },
                theme: 'snow',
                placeholder: 'Write your homily content here...'
            });
        }
        
        function loadHomilies() {
            const homilies = JSON.parse(localStorage.getItem('homilies')) || [];
            
            // Load homilies page
            const homiliesContainer = document.getElementById('homilies-container');
            if (homiliesContainer) {
                homiliesContainer.innerHTML = '';
                if (homilies.length === 0) {
                    homiliesContainer.innerHTML = '<p>No homilies available yet.</p>';
                } else {
                    homilies.forEach(homily => {
                        const homilyElement = createHomilyCard(homily);
                        homiliesContainer.appendChild(homilyElement);
                    });
                }
            }
            
            // Load latest page
            const latestContainer = document.getElementById('latest-container');
            if (latestContainer) {
                latestContainer.innerHTML = '';
                // Show only the latest 6 homilies
                const latestHomilies = [...homilies].sort((a, b) => new Date(b.date) - new Date(a.date)).slice(0, 6);
                if (latestHomilies.length === 0) {
                    latestContainer.innerHTML = '<p>No homilies available yet.</p>';
                } else {
                    latestHomilies.forEach(homily => {
                        const homilyElement = createHomilyCard(homily);
                        latestContainer.appendChild(homilyElement);
                    });
                }
            }
            
            // Load home page latest section
            const homeLatestContainer = document.getElementById('home-latest-container');
            if (homeLatestContainer) {
                homeLatestContainer.innerHTML = '';
                // Show only the latest 3 homilies
                const latestHomilies = [...homilies].sort((a, b) => new Date(b.date) - new Date(a.date)).slice(0, 3);
                if (latestHomilies.length === 0) {
                    homeLatestContainer.innerHTML = '<p>No homilies available yet.</p>';
                } else {
                    latestHomilies.forEach(homily => {
                        const homilyElement = createHomilyCard(homily);
                        homeLatestContainer.appendChild(homilyElement);
                    });
                }
            }
            
            // Update featured homily on home page
            const featuredHomily = homilies.find(homily => homily.featured);
            if (featuredHomily && document.getElementById('home').classList.contains('active')) {
                const featuredCard = document.querySelector('.featured-card');
                if (featuredCard) {
                    featuredCard.querySelector('h3').textContent = featuredHomily.title;
                    featuredCard.querySelector('.card-meta span:first-child').textContent = formatDate(featuredHomily.date);
                    featuredCard.querySelector('.card-meta span:last-child').textContent = featuredHomily.scripture;
                    featuredCard.querySelector('p').textContent = featuredHomily.content.substring(0, 150) + '...';
                    
                    // Update featured image if exists
                    const cardImg = featuredCard.querySelector('.card-img');
                    if (featuredHomily.thumbnail) {
                        cardImg.innerHTML = `<img src="${featuredHomily.thumbnail}" alt="${featuredHomily.title}">`;
                    } else {
                        cardImg.innerHTML = featuredHomily.title.substring(0, 2);
                    }
                    
                    // Update the read more link to open the full post
                    const readMoreLink = featuredCard.querySelector('.btn');
                    readMoreLink.onclick = function(e) {
                        e.preventDefault();
                        showPostDetail(featuredHomily.id);
                    };
                }
            }
        }
        
        function createHomilyCard(homily) {
            const homilyElement = document.createElement('div');
            homilyElement.className = 'post-card';
            
            // Create image content based on whether thumbnail exists
            let imgContent = homily.title.substring(0, 2);
            if (homily.thumbnail) {
                imgContent = `<img src="${homily.thumbnail}" alt="${homily.title}">`;
            }
            
            homilyElement.innerHTML = `
                <div class="post-img">${imgContent}</div>
                <div class="post-content">
                    <h3>${homily.title}</h3>
                    <div class="card-meta">${formatDate(homily.date)} | ${homily.scripture || 'No scripture'}</div>
                    <p>${homily.content.substring(0, 100)}...</p>
                    <a href="#" class="btn read-more" data-id="${homily.id}">Read More</a>
                </div>
            `;
            
            // Add event listener to the read more button
            const readMoreBtn = homilyElement.querySelector('.read-more');
            readMoreBtn.addEventListener('click', function(e) {
                e.preventDefault();
                showPostDetail(homily.id);
            });
            
            return homilyElement;
        }
        
        function showPostDetail(id) {
            const homilies = JSON.parse(localStorage.getItem('homilies')) || [];
            const homily = homilies.find(h => h.id == id);
            
            if (homily) {
                const modalContent = document.getElementById('post-detail-content');
                
                // Create image content based on whether thumbnail exists
                let imgContent = '';
                if (homily.thumbnail) {
                    imgContent = `<div class="post-detail-image" style="margin-bottom: 2rem;">
                        <img src="${homily.thumbnail}" alt="${homily.title}" style="width: 100%; border-radius: 8px;">
                    </div>`;
                }
                
                modalContent.innerHTML = `
                    <div class="post-detail">
                        <div class="post-detail-header">
                            <h2 class="post-detail-title">${homily.title}</h2>
                            <div class="post-detail-meta">
                                <span>${formatDate(homily.date)}</span> | 
                                <span>${homily.scripture || 'No scripture'}</span> | 
                                <span>${homily.category || 'Uncategorized'}</span>
                            </div>
                        </div>
                        ${imgContent}
                        <div class="post-detail-content">
                            ${homily.content}
                        </div>
                    </div>
                    ${renderCommentSection(id)}
                `;
                
                // Add event listener to the comment form
                const commentForm = document.getElementById(`comment-form-${id}`);
                if (commentForm) {
                    commentForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        addComment(id);
                    });
                }
                
                // Show the modal
                document.getElementById('post-modal').style.display = 'block';
            }
        }
        
        function renderCommentSection(postId) {
            const comments = JSON.parse(localStorage.getItem('comments')) || [];
            const postComments = comments.filter(comment => comment.postId == postId);
            const isAdmin = localStorage.getItem('authenticated') === 'true';
            
            return `
                <div class="comments-section">
                    <h3>Comments (${postComments.length})</h3>
                    
                    <div class="comment-form">
                        <form id="comment-form-${postId}">
                            <div class="form-group">
                                <label for="comment-author-${postId}">Your Name</label>
                                <input type="text" id="comment-author-${postId}" required>
                            </div>
                            <div class="form-group">
                                <label for="comment-content-${postId}">Your Comment</label>
                                <textarea id="comment-content-${postId}" rows="3" required></textarea>
                            </div>
                            <button type="submit" class="btn">Post Comment</button>
                        </form>
                    </div>
                    
                    <div class="comments-list">
                        ${postComments.length > 0 ? 
                            postComments.map(comment => `
                                <div class="comment" id="comment-${comment.id}">
                                    <div class="comment-header">
                                        <span class="comment-author">${comment.author}</span>
                                        <span class="comment-date">${formatDate(comment.date)}</span>
                                    </div>
                                    <div class="comment-content">${comment.content}</div>
                                    ${isAdmin ? `
                                        <div class="comment-actions">
                                            <button class="btn btn-secondary delete-comment" data-comment-id="${comment.id}">Delete</button>
                                        </div>
                                    ` : ''}
                                </div>
                            `).join('') : 
                            '<div class="no-comments">No comments yet. Be the first to share your thoughts!</div>'
                        }
                    </div>
                </div>
            `;
        }
        
        function addComment(postId) {
            const author = document.getElementById(`comment-author-${postId}`).value;
            const content = document.getElementById(`comment-content-${postId}`).value;
            
            if (!author || !content) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            const comments = JSON.parse(localStorage.getItem('comments')) || [];
            const newComment = {
                id: comments.length > 0 ? Math.max(...comments.map(c => c.id)) + 1 : 1,
                postId: parseInt(postId),
                author,
                content,
                date: new Date().toISOString()
            };
            
            comments.push(newComment);
            localStorage.setItem('comments', JSON.stringify(comments));
            
            // Refresh the comment section
            showPostDetail(postId);
            showToast('Comment added successfully!');
        }
        
        function deleteComment(commentId) {
            if (!localStorage.getItem('authenticated')) {
                showToast('You need to be logged in as admin to delete comments', 'error');
                return;
            }
            
            if (confirm('Are you sure you want to delete this comment?')) {
                const comments = JSON.parse(localStorage.getItem('comments')) || [];
                const updatedComments = comments.filter(comment => comment.id != commentId);
                localStorage.setItem('comments', JSON.stringify(updatedComments));
                
                // Find the post ID to refresh the correct comment section
                const deletedComment = comments.find(c => c.id == commentId);
                if (deletedComment) {
                    // Refresh the comment section
                    showPostDetail(deletedComment.postId);
                }
                
                showToast('Comment deleted successfully!');
            }
        }
        
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }
        
        function loadCategories() {
            const categories = JSON.parse(localStorage.getItem('categories')) || [];
            const categorySelect = document.getElementById('post-category');
            const parentCategorySelect = document.getElementById('parent-category');
            const categoriesContainer = document.getElementById('categories-container');
            
            if (categorySelect) {
                categorySelect.innerHTML = '<option value="">Select a category</option>';
                categories.forEach(category => {
                    if (category.visible) {
                        const option = document.createElement('option');
                        option.value = category.name;
                        option.textContent = category.name;
                        categorySelect.appendChild(option);
                    }
                    
                    // Also add to parent category select
                    if (parentCategorySelect) {
                        const parentOption = document.createElement('option');
                        parentOption.value = category.name;
                        parentOption.textContent = category.name;
                        parentCategorySelect.appendChild(parentOption);
                    }
                });
            }
            
            if (categoriesContainer) {
                categoriesContainer.innerHTML = '';
                categories.forEach(category => {
                    const categoryItem = document.createElement('div');
                    categoryItem.className = 'category-item';
                    categoryItem.innerHTML = `
                        <div>
                            <span>${category.name}</span>
                            <span class="category-badge ${category.visible ? 'visible-badge' : 'hidden-badge'}">
                                ${category.visible ? 'Visible' : 'Hidden'}
                            </span>
                        </div>
                        <div class="category-actions">
                            <button class="visibility-toggle" data-id="${category.id}">
                                <i class="fas ${category.visible ? 'fa-eye visible-icon' : 'fa-eye-slash hidden-icon'}"></i>
                            </button>
                            <button class="btn delete-category" data-id="${category.id}">Delete</button>
                        </div>
                    `;
                    categoriesContainer.appendChild(categoryItem);
                });
                
                // Add event listeners to visibility toggle buttons
                document.querySelectorAll('.visibility-toggle').forEach(button => {
                    button.addEventListener('click', function() {
                        toggleCategoryVisibility(this.getAttribute('data-id'));
                    });
                });
                
                // Add event listeners to delete buttons
                document.querySelectorAll('.delete-category').forEach(button => {
                    button.addEventListener('click', function() {
                        deleteCategory(this.getAttribute('data-id'));
                    });
                });
            }
        }
        
        function loadCategoryButtons() {
            const categories = JSON.parse(localStorage.getItem('categories')) || [];
            const homeContainer = document.getElementById('home-categories');
            const homiliesContainer = document.getElementById('homilies-categories');
            
            // Function to create category buttons
            const createCategoryButtons = (container) => {
                container.innerHTML = '';
                
                // Add an "All" button
                const allButton = document.createElement('button');
                allButton.className = 'category-btn';
                allButton.textContent = 'All';
                allButton.addEventListener('click', () => {
                    loadHomilies(); // Show all homilies
                });
                container.appendChild(allButton);
                
                // Add buttons for each visible category
                categories.forEach(category => {
                    if (category.visible) {
                        const button = document.createElement('button');
                        button.className = 'category-btn';
                        button.textContent = category.name;
                        button.addEventListener('click', () => {
                            filterHomiliesByCategory(category.name);
                        });
                        container.appendChild(button);
                    }
                });
            };
            
            if (homeContainer) {
                createCategoryButtons(homeContainer);
            }
            
            if (homiliesContainer) {
                createCategoryButtons(homiliesContainer);
            }
        }
        
        function filterHomiliesByCategory(category) {
            const homilies = JSON.parse(localStorage.getItem('homilies')) || [];
            const homiliesContainer = document.getElementById('homilies-container');
            
            if (homiliesContainer) {
                homiliesContainer.innerHTML = '';
                
                const filteredHomilies = homilies.filter(homily => homily.category === category);
                
                if (filteredHomilies.length === 0) {
                    homiliesContainer.innerHTML = '<p>No homilies available in this category.</p>';
                } else {
                    filteredHomilies.forEach(homily => {
                        const homilyElement = createHomilyCard(homily);
                        homiliesContainer.appendChild(homilyElement);
                    });
                }
            }
        }
        
        function loadResources() {
            const resources = JSON.parse(localStorage.getItem('resources')) || [];
            const resourcesContainer = document.getElementById('resources-container');
            
            if (resourcesContainer) {
                resourcesContainer.innerHTML = '';
                if (resources.length === 0) {
                    resourcesContainer.innerHTML = '<p>No resources available yet.</p>';
                } else {
                    resources.forEach(resource => {
                        const resourceElement = document.createElement('div');
                        resourceElement.className = 'resource-item';
                        resourceElement.innerHTML = `
                            <h4>${resource.title}</h4>
                            <p><strong>Category:</strong> ${resource.category}</p>
                            <p>${resource.description}</p>
                            <a href="#" class="btn">Download PDF</a>
                        `;
                        resourcesContainer.appendChild(resourceElement);
                    });
                }
            }
        }
        
        function loadPostsList() {
            const homilies = JSON.parse(localStorage.getItem('homilies')) || [];
            const postsList = document.getElementById('posts-list');
            
            if (postsList) {
                postsList.innerHTML = '';
                if (homilies.length === 0) {
                    postsList.innerHTML = '<p>No posts available yet.</p>';
                } else {
                    homilies.forEach(homily => {
                        const postItem = document.createElement('div');
                        postItem.className = 'post-item';
                        postItem.innerHTML = `
                            <h4>${homily.title}</h4>
                            <p><strong>Date:</strong> ${formatDate(homily.date)} | <strong>Category:</strong> ${homily.category}</p>
                            <div class="post-actions">
                                <button class="btn edit-post" data-id="${homily.id}">Edit</button>
                                <button class="btn btn-secondary delete-post" data-id="${homily.id}">Delete</button>
                                <button class="btn feature-post" data-id="${homily.id}">${homily.featured ? 'Unfeature' : 'Feature'}</button>
                            </div>
                        `;
                        postsList.appendChild(postItem);
                    });
                    
                    // Add event listeners to action buttons
                    document.querySelectorAll('.edit-post').forEach(button => {
                        button.addEventListener('click', function() {
                            editPost(this.getAttribute('data-id'));
                        });
                    });
                    
                    document.querySelectorAll('.delete-post').forEach(button => {
                        button.addEventListener('click', function() {
                            deletePost(this.getAttribute('data-id'));
                        });
                    });
                    
                    document.querySelectorAll('.feature-post').forEach(button => {
                        button.addEventListener('click', function() {
                            toggleFeaturePost(this.getAttribute('data-id'));
                        });
                    });
                }
            }
        }
        
        function loadResourcesList() {
            const resources = JSON.parse(localStorage.getItem('resources')) || [];
            const resourcesList = document.getElementById('resources-list-admin');
            
            if (resourcesList) {
                resourcesList.innerHTML = '';
                if (resources.length === 0) {
                    resourcesList.innerHTML = '<p>No resources available yet.</p>';
                } else {
                    resources.forEach(resource => {
                        const resourceItem = document.createElement('div');
                        resourceItem.className = 'resource-item';
                        resourceItem.innerHTML = `
                            <h4>${resource.title}</h4>
                            <p><strong>Category:</strong> ${resource.category}</p>
                            <p>${resource.description}</p>
                            <div class="resource-actions">
                                <button class="btn delete-resource" data-id="${resource.id}">Delete</button>
                            </div>
                        `;
                        resourcesList.appendChild(resourceItem);
                    });
                    
                    // Add event listeners to delete buttons
                    document.querySelectorAll('.delete-resource').forEach(button => {
                        button.addEventListener('click', function() {
                            deleteResource(this.getAttribute('data-id'));
                        });
                    });
                }
            }
        }
        
        function savePost() {
            const title = document.getElementById('post-title').value;
            const category = document.getElementById('post-category').value;
            const scripture = document.getElementById('post-scripture').value;
            const content = quill.root.innerHTML;
            const featured = document.getElementById('post-featured').checked;
            const thumbnailInput = document.getElementById('post-thumbnail');
            
            const homilies = JSON.parse(localStorage.getItem('homilies')) || [];
            
            // Process thumbnail if selected
            let thumbnailData = null;
            if (thumbnailInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    thumbnailData = event.target.result;
                    savePostWithThumbnail(thumbnailData);
                };
                reader.readAsDataURL(thumbnailInput.files[0]);
            } else {
                savePostWithThumbnail(null);
            }
            
            function savePostWithThumbnail(thumbnail) {
                if (currentHomilyId) {
                    // Editing existing post
                    const index = homilies.findIndex(h => h.id == currentHomilyId);
                    if (index !== -1) {
                        homilies[index] = {
                            ...homilies[index],
                            title,
                            category,
                            scripture,
                            content,
                            featured,
                            thumbnail: thumbnail || homilies[index].thumbnail
                        };
                        showToast('Post updated successfully!');
                    }
                } else {
                    // Creating new post
                    const newPost = {
                        id: homilies.length > 0 ? Math.max(...homilies.map(h => h.id)) + 1 : 1,
                        title,
                        category,
                        scripture,
                        content,
                        date: new Date().toISOString().split('T')[0],
                        featured,
                        thumbnail
                    };
                    
                    homilies.unshift(newPost);
                    showToast('Post created successfully!');
                }
                
                localStorage.setItem('homilies', JSON.stringify(homilies));
                
                document.getElementById('post-form').reset();
                quill.setText('');
                currentHomilyId = null;
                
                // Hide thumbnail preview
                document.getElementById('thumbnail-preview').style.display = 'none';
                
                // Reload homilies to show the new post
                loadHomilies();
                loadPostsList();
            }
        }
        
        function editPost(id) {
            const homilies = JSON.parse(localStorage.getItem('homilies')) || [];
            const homily = homilies.find(h => h.id == id);
            
            if (homily) {
                document.getElementById('post-title').value = homily.title;
                document.getElementById('post-category').value = homily.category;
                document.getElementById('post-scripture').value = homily.scripture || '';
                quill.root.innerHTML = homily.content;
                document.getElementById('post-featured').checked = homily.featured;
                
                // Show thumbnail if exists
                if (homily.thumbnail) {
                    const preview = document.getElementById('thumbnail-preview');
                    const previewImg = document.getElementById('thumbnail-preview-img');
                    previewImg.src = homily.thumbnail;
                    preview.style.display = 'block';
                }
                
                currentHomilyId = id;
                
                // Scroll to the form
                document.getElementById('post-form').scrollIntoView();
                
                showToast('Editing post: ' + homily.title);
            }
        }
        
        function deletePost(id) {
            if (confirm('Are you sure you want to delete this post?')) {
                const homilies = JSON.parse(localStorage.getItem('homilies')) || [];
                const updatedHomilies = homilies.filter(h => h.id != id);
                localStorage.setItem('homilies', JSON.stringify(updatedHomilies));
                
                showToast('Post deleted successfully!');
                loadHomilies();
                loadPostsList();
            }
        }
        
        function toggleFeaturePost(id) {
            const homilies = JSON.parse(localStorage.getItem('homilies')) || [];
            const homilyIndex = homilies.findIndex(h => h.id == id);
            
            if (homilyIndex !== -1) {
                // If we're featuring this post, unfeature all others first
                if (!homilies[homilyIndex].featured) {
                    homilies.forEach(homily => {
                        homily.featured = false;
                    });
                }
                
                homilies[homilyIndex].featured = !homilies[homilyIndex].featured;
                localStorage.setItem('homilies', JSON.stringify(homilies));
                
                showToast(`Post ${homilies[homilyIndex].featured ? 'featured' : 'unfeatured'} successfully!`);
                loadHomilies();
                loadPostsList();
            }
        }
        
        function addCategory() {
            const name = document.getElementById('category-name').value;
            const parent = document.getElementById('parent-category').value;
            
            const categories = JSON.parse(localStorage.getItem('categories')) || [];
            
            if (parent) {
                // Add as subcategory
                const parentCategory = categories.find(c => c.name === parent);
                if (parentCategory) {
                    if (!parentCategory.subcategories) {
                        parentCategory.subcategories = [];
                    }
                    parentCategory.subcategories.push(name);
                }
            } else {
                // Add as main category
                const newCategory = {
                    id: categories.length > 0 ? Math.max(...categories.map(c => c.id)) + 1 : 1,
                    name,
                    subcategories: [],
                    visible: true
                };
                categories.push(newCategory);
            }
            
            localStorage.setItem('categories', JSON.stringify(categories));
            
            showToast('Category added successfully!');
            document.getElementById('category-form').reset();
            
            // Reload categories
            loadCategories();
            loadCategoryButtons();
        }
        
        function toggleCategoryVisibility(id) {
            const categories = JSON.parse(localStorage.getItem('categories')) || [];
            const categoryIndex = categories.findIndex(c => c.id == id);
            
            if (categoryIndex !== -1) {
                categories[categoryIndex].visible = !categories[categoryIndex].visible;
                localStorage.setItem('categories', JSON.stringify(categories));
                
                showToast(`Category ${categories[categoryIndex].visible ? 'shown' : 'hidden'} successfully!`);
                loadCategories();
                loadCategoryButtons();
            }
        }
        
        function deleteCategory(id) {
            if (confirm('Are you sure you want to delete this category?')) {
                const categories = JSON.parse(localStorage.getItem('categories')) || [];
                const updatedCategories = categories.filter(c => c.id != id);
                localStorage.setItem('categories', JSON.stringify(updatedCategories));
                
                showToast('Category deleted successfully!');
                loadCategories();
                loadCategoryButtons();
            }
        }
        
        function addResource() {
            const title = document.getElementById('resource-title').value;
            const category = document.getElementById('resource-category').value;
            const description = document.getElementById('resource-description').value;
            const fileInput = document.getElementById('resource-file');
            
            if (!fileInput.files[0]) {
                showToast('Please select a PDF file to upload.', 'error');
                return;
            }
            
            const resources = JSON.parse(localStorage.getItem('resources')) || [];
            const newResource = {
                id: resources.length > 0 ? Math.max(...resources.map(r => r.id)) + 1 : 1,
                title,
                category,
                description,
                filename: fileInput.files[0].name
            };
            
            resources.push(newResource);
            localStorage.setItem('resources', JSON.stringify(resources));
            
            showToast('Resource added successfully!');
            document.getElementById('resource-form').reset();
            
            // Reload resources
            loadResources();
            loadResourcesList();
        }
        
        function deleteResource(id) {
            if (confirm('Are you sure you want to delete this resource?')) {
                const resources = JSON.parse(localStorage.getItem('resources')) || [];
                const updatedResources = resources.filter(r => r.id != id);
                localStorage.setItem('resources', JSON.stringify(updatedResources));
                
                showToast('Resource deleted successfully!');
                loadResources();
                loadResourcesList();
            }
        }
        
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast show ${type}`;
            
            setTimeout(() => {
                toast.className = 'toast';
            }, 3000);
        }
        
        // Export functions for saving data to files
        function exportHomilies() {
            const homilies = JSON.parse(localStorage.getItem('homilies')) || [];
            const dataStr = JSON.stringify(homilies, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'homilies.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showToast('Homilies exported successfully!');
        }
        
        function exportCategories() {
            const categories = JSON.parse(localStorage.getItem('categories')) || [];
            const dataStr = JSON.stringify(categories, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'categories.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showToast('Categories exported successfully!');
        }
        
        function exportResources() {
            const resources = JSON.parse(localStorage.getItem('resources')) || [];
            const dataStr = JSON.stringify(resources, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'resources.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showToast('Resources exported successfully!');
        }
        
        function exportAllData() {
            const homilies = JSON.parse(localStorage.getItem('homilies')) || [];
            const categories = JSON.parse(localStorage.getItem('categories')) || [];
            const resources = JSON.parse(localStorage.getItem('resources')) || [];
            const comments = JSON.parse(localStorage.getItem('comments')) || [];
            
            const allData = {
                homilies,
                categories,
                resources,
                comments,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(allData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'spiritual_journey_backup.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showToast('All data exported successfully!');
        }
        
        function importData() {
            const fileInput = document.getElementById('import-file');
            const file = fileInput.files[0];
            
            if (!file) {
                showToast('Please select a JSON file to import', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.homilies) {
                        localStorage.setItem('homilies', JSON.stringify(data.homilies));
                    }
                    
                    if (data.categories) {
                        localStorage.setItem('categories', JSON.stringify(data.categories));
                    }
                    
                    if (data.resources) {
                        localStorage.setItem('resources', JSON.stringify(data.resources));
                    }
                    
                    if (data.comments) {
                        localStorage.setItem('comments', JSON.stringify(data.comments));
                    }
                    
                    // If it's a single array (old format)
                    if (Array.isArray(data) && data.length > 0) {
                        if (data[0].title) {
                            localStorage.setItem('homilies', JSON.stringify(data));
                        } else if (data[0].name) {
                            localStorage.setItem('categories', JSON.stringify(data));
                        } else if (data[0].resourceTitle) {
                            localStorage.setItem('resources', JSON.stringify(data));
                        }
                    }
                    
                    showToast('Data imported successfully!');
                    loadHomilies();
                    loadCategories();
                    loadResources();
                    loadPostsList();
                    loadResourcesList();
                    loadCategoryButtons();
                    fileInput.value = '';
                    
                } catch (error) {
                    showToast('Error parsing JSON file: ' + error.message, 'error');
                }
            };
            reader.readAsText(file);
        }
    </script>
</body>
</html>